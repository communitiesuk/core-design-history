{% extends "base.njk" %}

{% from "article/macro.njk" import appArticle %}
{% from "related-navigation/macro.njk" import appRelatedNavigation %}
{% from "screenshots/macro.njk" import appScreenshots %}
{% from "prose/macro.njk" import appProse %}

{% block content %}
  {% call appArticle({
    header: {
      caption: ("Sprint " + tags | join("/")) if tags,
      title: title | widont
    },
    footer: {
      date: page.date,
      modified: modified if modified,
      author: author if author
    }
  }) %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {{ appProse({
        prose: content
      }) }}

      {% for collection in screenshots %}
        {{ appScreenshots(collection) }}
      {% else %}
        {{ appScreenshots(screenshots) if screenshots }}
      {% endfor %}
    </div>

    {% if related.items | length > 0 %}
    <div class="govuk-grid-column-one-third">
      {{ appRelatedNavigation({
        sections: [{
          title: related.title or "Related links",
          items: related.items,
          subsections: [{
            title: "Other posts from Sprint " + tags[0],
            items: collections[tags[0]] | collectionToItems
          }]
        }]
      }) }}
    </div>
    {% endif %}
  </div>
  {% endcall %}
{% endblock %}
